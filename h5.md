# h5

Homeworks for lesson h5
<http://terokarvinen.com/2020/ict-security-basics-from-trust-to-blockchain-itc4hm003-3001-2020-spring/>

## z

> Reading: Shavers & Bair 2016: Hiding Behind the Keyboard

The Onion Router, commonly referred at “Tor”

Distracts tracking of _who_ visited a web site. It does not hide the fact that
a webite was visited and it does not hide what was done.

I guess if the target site would use HTTPS then the connection would also be
secure

Use cases
> Businesses use Tor to browse a competitor’s website to avoid the competitor logging the traffic. Whistleblowers, government agents and informants, and tourists use the Tor browser to protect their communications from being disclosed for legitimate communications. Law enforcement should encourage the use of Tor in their investigations to avoid suspects being aware of government IP addresses looking at websites being investigated.


If the governament is oppressive then acting as just a Tor relay may be illegal and
can get you in to a lot of trouble.

Cencoring is done to known Tor relays (or nodes). There are unlisted Tor
addresses (bridges) that can be manually configured to access the Tor network.

One problem is that exit nodes can hosted by the oppressive government...
but does exit node know the original sender?

There were dosens Tor related apps in Apples Appstore. Is any of them the
official version? How would one know?


The forensics part was a little over my head.

> One of the weaknesses, if not the biggest weakness, of the Tor browser is the user.

> deanonymizing Tor by attacking and disabling a large percentage of the Tor network

>  _if_ the communications are encrypted end-to-end, capturing the traffic does not decrypt the contents of messages.


What is Tails?

> As Tor is a browser that can be used anonymously, Tails (The Amnesic Incognito Live System) is a complete operating system that can be used anonymously.

> Tails does not leave any trace on the host computer system. A Tails user can prevent any forensic artifacts being created since Tails does not touch the host computer hard drive.


What is Tor? What is Onion Router? What is Tor browser?

What are .onion addresses?

> A hidden service is a server on the Tor network that provides a service, such as e-mail or file hosting.

> Hidden services are not indexed by search engines and therefore, practically invisible to the Internet. Hidden services also do not use exit nodes.

> Hidden service websites are most always accessed with the Tor browser with the top-level domain of the hidden services being “.onion”.

How do these things relate to each other.

> Tor allows anyone to connect to websites that may be blocked by oppressive governments



## a

> Install Tails and access TOR network (.onion addresses). (Explain in detail how you installed it, and how you got access to TOR).

I haven'd has a bittorrent program installed for many many years, but this
course requires a lot of downloading of files that are available as torrent
downloads. The torrents are also often the preferred method of downloading.

So I started of by reading what is the best torrent client these days.

According to [How-To Geek](https://www.howtogeek.com/197542/the-4-best-alternatives-to-utorrent-on-windows/) the once nice uTorrent has
been aquired by BitTorrent Inc and filled with adverts. The recommended software
is qBittorrent, so I selected that.

The [download page](https://www.fosshub.com/qBittorrent.html) contained File Signatures for verfying the downloaded file and
through 7Zip Windows 10 now contains the ability to calculate SHA256 for files in
Explorer. As the signatures matched I continued my adventure.

On to the Tails. It is was availabl as a [virtual machine image](https://tails.boum.org/install/vm-download/index.en.html) so I selected that, as
Virtual Box was already installed on my machine.

There were a [few warnings on using virtual machines](https://tails.boum.org/doc/advanced_topics/virtualization/index.en.html). The security could be
compromised, but for the sake of this excercise I continued with this endeavour.

![New virtual machine dialog](tails-from-iso.png?raw=true "Add new virtual machine for Tails")

It was easy to follow installation instructions, but at first start I recieved
a warning of low memory on host computer.

![Memory issues notification](trouble.png?raw=true "Memory problems with virtual machine")

I powered off the Tails machine and one Xubuntu virtual machine and some other
software that was running but wasnt't necessary. Second try worked without any
issues and I was able to boot to the Tails desktop.

Taking screen shots form Virtual Box was a bit difficult, I guess some of the
`Shift` + `Win` + `S` combination's keys are reserved for some use. I had to
activate another application window to activate the screen shot tool. I also
learned that one can take screen shots directly from VirtualBOx using
key combination `Host` + `E`.

After startup there was a brief warning about running Tails inside a virtual
machine, but I wasn't able to read it befor it disappeared. I couldn't find
the notification later. It had a mention about using closed source virtualization
environment eg. the Virtual Box which is made by Oracle. There seems to be a
couple of [open source alternatives](https://www.davescomputers.com/support-seven-alternatives-virtualbox/) to managing virtual machines, for example
QEMU and KVM but I'm yet to become familiar with these two.

Onwards with the task! The Tor browser was available in the main menu of the
Tails desktop (which seemed to be Gnome).

![Browser is available in the menu](tails-tor.png?raw=true "Application > Favorites >  Tor Browser")

It is not the fastest browser due to the traffic being transferred over several
different Tor nodes. It first opens up to Tails homepage.

![Browser started](tor-browser.png?raw=true "Tor Browser Home Page")

I recalled an old [news article from YLE](https://yle.fi/uutiset/3-11035384)
that reported that BBC had made their website available in the Tor network with
the .onion address <https://www.bbcnewsv2vjtpsuy.onion/>. The BBC site is
available with the normal bbc.com address as well. But the difference in using
the .onion address (according to the [literature](#z)) is that the .onion
version doesn't use an exit node.

But then again, isn't the .onion address public information? Can these be
blocked by intenet censors? Apparently the .onion addresses can only be accessed
from within the Tor network, and if the connection was made through bridges
instead of public nodes then I think the sites cannot be censored.

![BBC through .onion and .com](2-bbc-sites.png?raw=true "BBC through .onion and .com")

On a side note, adding screenshots to GitHub markdown is easy, but it takes a
while for the images to become available on GitHub Pages site.

```markdown
![Alt text](image.png?raw=true "Title")
```

## b

> Browse TOR network, find, take screenshots and comment
>    * search engine for onion sites
>    * marketplace
>    * fraud
>    * forum

Finding the .onion sites first try was to use the search field in the Tails home
page. But this didn't return anything useful.

![Looking for onion sites](tails-search-onion-sites.png?raw=true "No onion sites here")

Duck Duck Go my default and Tails' deafult search engine found several sites
that listed .onion sites. Due to the sites them selves not being indexed
there seems to be no way to "Google" them.

![Onion sites in Duck Duck GO](onion-sites-ddg.png?raw=true "Search onion sites in DDG")

I visited the address <onionsites.com> which lists places in the Dark Web
(spooky name). Most of them seemed to be for selling marijuana and other drugs,
but this can't be really confirmed until the site is visited. Site
<onionlinksanifwu.onion> gave a list of sites with very little description of
them. How would one find what they are about.

![Onion site listing onion sites](onion-sites.png?raw=true "Onion sites listed")

It may not be very safe to visit these sites if you don't know exactly what you
are looking for. Never mind the legal aspects, but what has been seen cannot be unseen,
and if I'm to believe what has been told about the Tor, some sites can contain
some bad stuff that can make you lose sleep.

The address <onionlandsearchengine.com> seemed to provide a search engine of
sorts for sites in the .onion domain.

![Search engine for onion sites](only-legal-things.png?raw=true "Onion sites searched")

This produced one titled "Marketplace". As it was in the assignment I took my
chances and payed a visit. Clicking the link provided a redirect notice that
revealed that this wasn't going to be a .onion site after all but a .onion.ly
site. It this a scam or something else. I'm not sure. But I decided against visiting this site

![Not the Onion](this-is-not-onion.png?raw=true "Not the Onion")

A lot of Tor related sites contain fear mongering VPN service adverts.

![VPN For Sale](marketplace-advers.png?raw=true "Wanna by a VPN?")

![Marketpalce for things](drugs-and-frauds.png?raw=true "Drugs and Frauds available")

I think it is legal for me to visit these sites, but I do have my doubts. I do
hope I'm not breaking any laws just by browsing. I tried to load the Grey Market
site but the request timed out. Maybe the site doesn't exist any more. Keeping
these onion site listings up to date must be a difficult task.

It remember that a site called Silk Road was in the news a couple of years ago.
Searching that from DDG found a website that redirected to .onion site. I guess
this is a convenient way of making the onion addresses more accessible.

The Silk Road (version 3.1) had a link to a user forum with a daunting captcha

![Silk Road 3.1](silkroad-31.png?raw=true "Silk Road 3.1")

Visiting the forum the first thing one sees is a notice informing that there is
a new version of Silk Road available again, a version 4.0.

![Silk Road 3.1 Forum](silkroad-forum.png?raw=true "Silk Road 3.1 Forum")

There was discussion that the version 3.1 was some kind of a scam site and that
the version 4.0 would require users to recover their accounts. I'm not sure
how this things works but it seems that there is a possibility to lose your
money with untrustworthy trade partners.

![Silk Road 3.1 Forum - Scam discussion](silkroad-31-scam.png?raw=true "Silk Road 3.1 Forum - Scam discussion")


## c

> Find an example where anonymity of TOR user was compromized. How was it done? Who did it? Could the deanonymization be replicated?

Most of the broken anonymity has been duo to user errors. Using Tor in a safe way can provide a very secure way of accessing the web. 

An fake bomb threat by email is used as an example [in the homework accompanying literature](#z). A student sent a bomb threat to school by using Tor network but he did it using the school network. The IT stafff were able to link user account that had accessed the Tor network with the sent threat emails. The Tor networks access time was the same as the emails sent times.

The legality of hosting an exit node is somewhat quetionable. It is not adviced to run an [exit node on your home computer](https://blog.torproject.org/tips-running-exit-node), and if you want you should consult your ISP first. I have thought about running a node, to make a world a better place, but then again due to the content in Dark Web "better palce" can be a bit of a stretch.

## d

> What other pseudonymous/anonymous networks are there?

A quick search for alternatives for using Tor to be anonymous brought up 
[I2P](https://geti2p.net/en/about/intro)

This is a Java application that is designed for anonymous networking. The details are a bit technical and it seems to be not using the TCP protocol by default. There is a [comparison to Tor page](https://geti2p.net/en/comparison/tor) for more details but both I2P and Tor seem to have the same goal: to anonymize the web usage.

Reading further about [anonymous peer-to-peer networks](https://en.wikipedia.org/wiki/Anonymous_P2P) on Wikipedia it quickly went a bit technical. But I guess there seems to be a lot of software to accomplish things
anonymously.


## e

> In your own words, how does anonymity work in TOR? (e.g. how does it use: public keys, encryption, what algorithms?)

I think the main point of

## f

> What is the threath model for TOR?

Tor can be used to [bypass company security regulations](https://www.andreafortuna.org/2016/04/27/tor-in-a-company-network-how-to-detect-and-block-it/). Because Tor encrypts
the traffic it creates it can be used to circumvent company IT blocked
addresses. This can pose a threat as there are a lot of sites that spread
viruses, ransomware and other nasty things which are availble to Tor users.

There is a way to prevent this by blocking (or limiting) the use of Tor. To
block usage of Tor in company network the strategy is quite the same as with
governments blocking Tor networks. This  can be done by posing limitations to user accouns and preventing the
installation of Tor browser, portable apps cannot be limited this way.Public
Tor nodes could be blacklisted in company network, but bridged connections
would be still available. From the article a third possible way to block access
is to prevent self-signed certificates which are used by the Tor browser.

These kind of limitations can propably be difficult and in a free(ish) country
like Finland I would recommend against using them and instead train
employees to safe usage of Tor.


## g

> Reserve your presentation topic. Security related. Combine fundamentals of security to business, strategy or practical applications. 5 minutes presentation + written article. Reserve topic on Moodle (HH login required)

https://learn.adafruit.com/onion-pi/overview


## References

Shavers, B, Bair, J. 2016. Hiding Behind the Keyboard

_Soundtrack was: Vatican Shadow - Luxor Necropolitics EP_